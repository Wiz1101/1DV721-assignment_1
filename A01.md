---
revision:
    "2023-01-05": "(B, mos) Updated for 2023."
    "2022-01-05": "(A, mos) First version."
---
Assignment 01 - Shell scripting with Bash
==========================

This assignment is worth 1.5 credits.

The grading is UG which is fail or pass.

[[_TOC_]]


<!--

* Add report template?

teach and practice bash a bit more before starting the assignment, split first week in two weeks (intro/linux + bash)?

backupscript easy
file analyser easy
text analyser the hardest part

-->



Introduction
--------------------------

You shall learn and practice on the Unix shell and how to write shell scripts using Bash.



Read & Study
--------------------------

Prepare for the assignment by reviewing the following resources.

1. The website [LinuxCommand.org](http://linuxcommand.org/) has a section on "[Writing Shell Scripts](http://linuxcommand.org/lc3_writing_shell_scripts.php)" which is a good start to prepare and learn the basics och Bash shell script programming.

1. There is an online website which can "[Explain the shell command to me](https://explainshell.com/)".Whenever you find a shellcommand and you wonder what the parts of it does, then you can get aid from this service.

1. The tool "[ShellCheck, finds bugs in your shell scripts](https://www.shellcheck.net/)" is a linting tool that verifies that you write your bash code correctly. The ShellCheck tool can also be installed locally as party of your development and test environment.



Resources
--------------------------

These resources might be useful when working with this assignment.

* [Bash Reference Manual](https://www.gnu.org/software/bash/manual/)

* [Bash Guide for Beginners](https://tldp.org/LDP/Bash-Beginners-Guide/html/)



Lab report
--------------------------

When you fulfill the requirements below you should also document your work in a lab report.

Show your code samples and describe your solution and if you tried other solutions. Elaborate on how hard/easy the task was and what made it hard/easy.

Combine text, code and images to make it a nice and easy to read report.

You can write the lab report in any tool (word, markdown, etc) but you should create a pdf of it when you submit it.

Add a front page to your report where you write your name and email and add some representative image.

Add a table of content to make it easy to see the structure of your report.

Add a section of references and add at least three valid references that you are using in your report.

Add the source code of each program below as an appendix to the report.

Put some effort into making it a good looking report.



Requirements
--------------------------

Fullfill the following requirements and write the response you your lab report. Each section below should be documented and visualised in its own section in your lab report.



### Customize your environment

Answer the following in your lab report.

1. Describe what OS, terminal and shell you are using for this exercise.

Add the following changes to your startup file(s).

1. Update the default shell promt (PS1) to be more "personal" or "carzy". You decide on how to change it but change it you must.

1. Create three aliases that you think could be useful when working in the shell. Show the aliases and in what startupfile you created them.



### Validate according to ShellCheck

All your code must validate according to the static code analysis tool ShellCheck. It is a most useful utility when coding and learning bash.

Add a section in the lab report where you reflect on how well you suceeded in following the coding rules and explain how you used the tool, online or installed locally.



### A backup script

Do the following and document it in the lab report.

Create a script `backup.bash <dir>` that takes a backup of a directory (sent as argument) and stores it in the file `tmp/backup_2022-01-25.tar.gz`. The script should be error prune and check if the backup file already exists and that the dir to be backed up is existing. Do also time the execution time and print it out after the command is done.

In the report, discuss the following questions.

1. Would it be possible to enhance the naming of the backupfile so it relates to the directory being backed up? How would you then name the backupfile?

1. Is it possible to add a timestamp to the backup so you could take several backups without overwriting the existing ones? How would then the filename look like?

Add the source code as an appendix to your report.



### A file size analyser

Do the following and document it in the lab report.

Write a script `large_files.bash <path>` that takes an directory path as an argument and scans it recursivly to find all files and their size.

The script should check if the path exists, otherwise it should produce an error message.

The script should write a report on the 5 largest files found (show the largest file first) and the total size of these files should be printed.

The script should also write out the total number of files scanned and the total filesize for the target path.

In the report, discuss the following questions.

1. Reflect on the final code and consider if this could be implemented as a one line command? Is one line commands good or bad?

Add the source code as an appendix to your report.



### A text analyser script

Do the following and document it in the lab report.

Write a script `analyse.bash <url>` that takes an url as an argument and downloads the resource and analyses it.

The script should work on binary files like images and on textfiles like web pages or source code.

The analyse that is done, could differ depending on the type of the file.

Write out a report on the downloaded file and show:

* The type of the file
* The size of the file
* For textfiles:
    * The number of lines in the file
    * The number of words in the file
    * The number of spaces in the file
    * Print the first line of the file and the last line of the file
* For binary files:
    * The number of bytes in the file
    * Show the 10-ish first and the 10-ish last bytes of the file in printable representation
* Open the local downloaded file in your favorite web browser

In the report, discuss the following questions.

1. Reflect on the final code, is it "good and clean"?

Add the source code as an appendix to your report.



### Bash with main and options

Take a copy of the example program `sample/bash/cli.bash` and extend it.

Add a command that does the following.

1. Present a daily quote and print it out nicely.
1. Use a local command that prints out the quote. You need to find a proper command for this that you can install.

Add another command that does the following.

1. Use the online quote service at https://quotes.rest/ to do get a daily quote.
    * You can opt to use another service that is out there, for example "Drink database JSON API" or similar. The basics is about making a request and parsing the reponse.
1. Print it out in a easy to read manner.

Do not forget to add the helptext of the new commands.

In the report, discuss the following questions.

1. Reflect on the cli code and compare it to other programming languages you have learnt. Talk about the similarity/differences and what is good/bad.

Add the source code as an appendix to your report.



### How to learn Linux

Answer the following in your lab report.

1. Lets say you have a friend that wants to learn Unix and the shell. What would be your suggestion to your friend on the five most important steps to start learning?



### TIL

TIL is an acronym for Today I Learned.

Write a final section in the lab report on your TIL while doing the lab. Feel free to reflect on what was hard, easy, tricky and challenging.

Perhaps you also would like to mention which script and solution you are most proud of?



### References

Add a section on "References" into your report and add at least three references using the [IEEE style](https://www.bath.ac.uk/publications/library-guides-to-citing-referencing/attachments/ieee-style-guide.pdf).



Submit
--------------------------

Submit the lab report as PDF onto MyMoodle.
